<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>BLOCKIMO:Support Your Peaceful Twitter Life</title>
    <link rel="stylesheet" href="../css/layouts/pure-min.css" />
    <link rel="stylesheet" href="../css/layouts/side-menu.css" />
    <style>
        .user {
            background: #FFF;
            padding: 10px;
            overflow: hidden;
        }
        .user_image {
            float: left;
            margin-right: 10px;
        }
        .user_summary {
            overflow: hidden;
        }
        .user_desc {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
         }
         .button-error {
            color: white;
            border-radius: 4px;
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
            background: rgb(202, 60, 60); /* this is a maroon */
        }

        .button-secondary {
            color: white;
            border-radius: 4px;
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
            background: rgb(66, 184, 221);
        }
        #ad {
            margin-top: 30px;
        }
.custom-restricted-width {
    /* To limit the menu width to the content of the menu: */
    display: inline-block;
    /* Or set the width explicitly: */
    /* width: 10em; */
}
[v-cloak] {
  display: none;
}

</style>
</head>
<body>

<div id="layout">
    <!-- Menu toggle -->
    <a href="#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>

    <div id="menu">
        <div class="pure-menu">
            <a class="pure-menu-heading" href="./index">BLOCKIMO</a>

            <ul class="pure-menu-list">
                <li class="pure-menu-item ">
                    <a href="../index" class="pure-menu-link">Home</a>
                </li>
                <li class="pure-menu-item menu-item-divided pure-menu-selected">
                    <a href="#" class="pure-menu-link">Block</a>
                </li>
                <li class="pure-menu-item">
                    <a href="../user/index" class="pure-menu-link">UserInfo</a>
                </li>
                <li class="pure-menu-item">
                    <a href="../settings/account" class="pure-menu-link">Settings</a>
                </li>
                <li class="pure-menu-item">
                    <a href="../qa" class="pure-menu-link">Q&amp;A</a>
                </li>
                <li class="pure-menu-item">
                    <a href="../contact" class="pure-menu-link">Contact</a>
                </li>
                <li class="pure-menu-item">
                    <a href="../logout" class="pure-menu-link">Logout</a>
                </li>
            </ul>
        </div>
    </div>


    <div>
        <div class="header">
            <h1>BLOCKIMO</h1>
            <h2>Support Your Peaceful Twitter Life</h2>
        </div>

        <div class="content">
            <h2 class="content-subhead">ユーザー検索</h2>
            <form id="app"  v-cloak="" class="pure-form">
            <div class="pure-control-group">
                <input type="text"  placeholder="jin115" v-model="screenName"/>
                <button type="button" class="pure-button button-secondary" v-on:click="showMessage">検索</button>
            </div>

            <div class="user" v-show="description!=''">
                <div class="pure-g user_image">
                    <div class="pure-u-1-1">
                        <img class="pure-img-responsive" :src='twitterImage' />
                    </div>
                </div>
                <div class="user_summary">
                    <p class="user_desc"> {{ description }} </p>
                    <p>フォロー :{{friendsCount}}</p>
                    <p>フォロワー:{{followersCount}}</p>
                </div>
                <button class="pure-button button-error" v-on:click="registerBlock" v-bind:disabled="isLoading">このユーザーのフォロワーを一括ブロック</button>
            </div>

            <div v-show="errorMessage!=''" id="error">
                <h3>エラーが発生しました</h3>
                <p>{{errorMessage}}</p>
            </div>

            <style type='text/css'>@-webkit-keyframes uil-default-anim { 0% { opacity: 1} 100% {opacity: 0} }@keyframes uil-default-anim { 0% { opacity: 1} 100% {opacity: 0} }.uil-default-css > div:nth-of-type(1){-webkit-animation: uil-default-anim 1s linear infinite;animation: uil-default-anim 1s linear infinite;-webkit-animation-delay: -0.5s;animation-delay: -0.5s;}.uil-default-css { position: relative;background:none;width:200px;height:200px;}.uil-default-css > div:nth-of-type(2){-webkit-animation: uil-default-anim 1s linear infinite;animation: uil-default-anim 1s linear infinite;-webkit-animation-delay: -0.4166666666666667s;animation-delay: -0.4166666666666667s;}.uil-default-css { position: relative;background:none;width:200px;height:200px;}.uil-default-css > div:nth-of-type(3){-webkit-animation: uil-default-anim 1s linear infinite;animation: uil-default-anim 1s linear infinite;-webkit-animation-delay: -0.33333333333333337s;animation-delay: -0.33333333333333337s;}.uil-default-css { position: relative;background:none;width:200px;height:200px;}.uil-default-css > div:nth-of-type(4){-webkit-animation: uil-default-anim 1s linear infinite;animation: uil-default-anim 1s linear infinite;-webkit-animation-delay: -0.25s;animation-delay: -0.25s;}.uil-default-css { position: relative;background:none;width:200px;height:200px;}.uil-default-css > div:nth-of-type(5){-webkit-animation: uil-default-anim 1s linear infinite;animation: uil-default-anim 1s linear infinite;-webkit-animation-delay: -0.16666666666666669s;animation-delay: -0.16666666666666669s;}.uil-default-css { position: relative;background:none;width:200px;height:200px;}.uil-default-css > div:nth-of-type(6){-webkit-animation: uil-default-anim 1s linear infinite;animation: uil-default-anim 1s linear infinite;-webkit-animation-delay: -0.08333333333333331s;animation-delay: -0.08333333333333331s;}.uil-default-css { position: relative;background:none;width:200px;height:200px;}.uil-default-css > div:nth-of-type(7){-webkit-animation: uil-default-anim 1s linear infinite;animation: uil-default-anim 1s linear infinite;-webkit-animation-delay: 0s;animation-delay: 0s;}.uil-default-css { position: relative;background:none;width:200px;height:200px;}.uil-default-css > div:nth-of-type(8){-webkit-animation: uil-default-anim 1s linear infinite;animation: uil-default-anim 1s linear infinite;-webkit-animation-delay: 0.08333333333333337s;animation-delay: 0.08333333333333337s;}.uil-default-css { position: relative;background:none;width:200px;height:200px;}.uil-default-css > div:nth-of-type(9){-webkit-animation: uil-default-anim 1s linear infinite;animation: uil-default-anim 1s linear infinite;-webkit-animation-delay: 0.16666666666666663s;animation-delay: 0.16666666666666663s;}.uil-default-css { position: relative;background:none;width:200px;height:200px;}.uil-default-css > div:nth-of-type(10){-webkit-animation: uil-default-anim 1s linear infinite;animation: uil-default-anim 1s linear infinite;-webkit-animation-delay: 0.25s;animation-delay: 0.25s;}.uil-default-css { position: relative;background:none;width:200px;height:200px;}.uil-default-css > div:nth-of-type(11){-webkit-animation: uil-default-anim 1s linear infinite;animation: uil-default-anim 1s linear infinite;-webkit-animation-delay: 0.33333333333333337s;animation-delay: 0.33333333333333337s;}.uil-default-css { position: relative;background:none;width:200px;height:200px;}.uil-default-css > div:nth-of-type(12){-webkit-animation: uil-default-anim 1s linear infinite;animation: uil-default-anim 1s linear infinite;-webkit-animation-delay: 0.41666666666666663s;animation-delay: 0.41666666666666663s;}.uil-default-css { position: relative;background:none;width:200px;height:200px;}</style>
            <div v-show="isLoading" class='uil-default-css' style='transform:scale(0.6);'>
                <div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(0deg) translate(0,-60px);transform:rotate(0deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
                <div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(30deg) translate(0,-60px);transform:rotate(30deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
                <div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(60deg) translate(0,-60px);transform:rotate(60deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
                <div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(90deg) translate(0,-60px);transform:rotate(90deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
                <div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(120deg) translate(0,-60px);transform:rotate(120deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
                <div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(150deg) translate(0,-60px);transform:rotate(150deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
                <div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(180deg) translate(0,-60px);transform:rotate(180deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
                <div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(210deg) translate(0,-60px);transform:rotate(210deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
                <div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(240deg) translate(0,-60px);transform:rotate(240deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
                <div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(270deg) translate(0,-60px);transform:rotate(270deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
                <div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(300deg) translate(0,-60px);transform:rotate(300deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
                <div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(330deg) translate(0,-60px);transform:rotate(330deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
            </div>
            </form>

           </div>
        </div>

    </div>
</div>





<script src="../js/ui.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.28/vue.js"></script>
<script src="https://code.jquery.com/jquery-3.0.0.js" integrity="sha256-jrPLZ+8vDxt2FnE1zvZXCkCcebI/C8Dt5xyaQBjxQIo=" crossorigin="anonymous"></script>
<script>
//Vue.config.debug = true;
var sendApi = false;
new Vue({
  el: '#app',
  data: {
    screenName: '' ,
    description: '',
    errorMessage: '',
    twitterImage: '',
    friendsCount: 0,
    followersCount:0,
    isLoading:false,
  },
  methods: {
    showMessage: function () {
        var data = {"screenName": this.screenName.trim()};
        var jsonPath = '/twitter/show';

        if (sendApi){
            return;
        }

        sendApi = true;
        var jqXHR = $.getJSON(jsonPath, data);
        self = this;
        self.isLoading = true;
        jqXHR.done(function(json) {
            console.log(json);
            self.errorMessage = '';
            self.description ='';
            if(json.resultCode == 0) {
                self.description = json.user.name;
                self.twitterImage = json.user.biggerProfileImageURLHttps;
                self.friendsCount = json.user.friendsCount;
                self.followersCount = json.user.followersCount;
            } else {
                self.errorMessage = json.message;
            }
            sendApi = false;
            self.isLoading = false;
        });
    },
    registerBlock: function() {
        var data = {"screenName": this.screenName.trim()};
        var jsonPath = '/block/register';
        if (sendApi){
            return;
        }
        console.log(data);
        sendApi = true;
        var jqXHR = $.getJSON(jsonPath, data);
        self = this;
        self.isLoading = true;
        self.description ='';
        this.screenName = '';
        jqXHR.done(function(json) {
            console.log(json);
            self.errorMessage = '';
            if(json.resultCode == 0) {
                alert("ブロック対象に登録しました");
            } else {
               // self.errorMessage = json.message;
            }
            sendApi = false;
            self.isLoading = false;
        });
    },
  }
});
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');

</script>
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</body>
</html>
